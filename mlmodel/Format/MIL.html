

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MILspec.Program &mdash; Core ML Format Reference  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NeuralNetwork" href="NeuralNetwork.html" />
    <link rel="prev" title="Identity" href="Identity.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Core ML Format Reference
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Model.html">Core ML Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataStructuresTypes.html">Data Structures, Types and Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="FeatureEngineering.html">Feature Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity.html">Identity</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MILspec.Program</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#coreml-specification-milspec">CoreML.Specification.MILSpec</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#program">Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function">Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#block">Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argument">Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="#op">Op</a></li>
<li class="toctree-l3"><a class="reference internal" href="#namedvaluetype">NamedValueType</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#types">Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#valuetype">ValueType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#datatype">DataType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tensortype">TensorType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tupletype">TupleType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#listtype">ListType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dictionarytype">DictionaryType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dimension">Dimension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#values">Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#value">Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tensorvalue">TensorValue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tuplevalue">TupleValue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#listvalue">ListValue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dictionaryvalue">DictionaryValue</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="NeuralNetwork.html">NeuralNetwork</a></li>
<li class="toctree-l1"><a class="reference internal" href="Classifiers.html">Other Classifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="OtherModels.html">Other Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="Regressors.html">Other Regressors</a></li>
<li class="toctree-l1"><a class="reference internal" href="SVM.html">Support Vector Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="TreeEnsemble.html">TreeEnsemble</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://coremltools.readme.io/docs">Guides and examples</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apple.github.io/coremltools/index.html">Core ML Tools (coremltools) API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apple/coremltools/tree/main/mlmodel">GitHub</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Core ML Format Reference</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>MILspec.Program</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Format/MIL.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="milspec-program">
<h1>MILspec.Program<a class="headerlink" href="#milspec-program" title="Permalink to this headline">¶</a></h1>
<div class="section" id="coreml-specification-milspec">
<h2>CoreML.Specification.MILSpec<a class="headerlink" href="#coreml-specification-milspec" title="Permalink to this headline">¶</a></h2>
<p>The top-level container. Programs, functions, blocks, ops, and tensor types all
can contain an optional set of attributes.</p>
<p>Identifiers, generally used for names and keys, must match the
regular expression <code class="docutils literal notranslate"><span class="pre">[A-Za-z\_][A-Za-z0-9\_&#64;]*</span></code>.</p>
<div class="section" id="program">
<h3>Program<a class="headerlink" href="#program" title="Permalink to this headline">¶</a></h3>
<p>A Program is a container with following information:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set of functions.</p></li>
<li><p>Each function defines a program block to be executed.</p></li>
<li><p>A model can have multiple functions defined and will have a single point
of entry.</p></li>
</ul>
</div></blockquote>
<p>Requirements:</p>
<ul class="simple">
<li><p>Must be unique within the containing program.</p></li>
<li><p>Names must be valid identifiers as described above.</p></li>
<li><p>Any other attributes not described by other fields.</p></li>
<li><p>Keys must be valid identifiers as described above.</p></li>
</ul>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">Program</span> <span class="p">{</span>
        <span class="kt">int64</span> <span class="na">version</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// Must be unique within the containing program</span>
        <span class="c1">// Names must be valid identifiers as described above.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Function</span><span class="p">&gt;</span> <span class="na">functions</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

        <span class="kt">string</span> <span class="na">docString</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="c1">// Any other attributes not described by other fields.</span>
        <span class="c1">// Keys must be valid identifiers as described above.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Value</span><span class="p">&gt;</span> <span class="na">attributes</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="function">
<h3>Function<a class="headerlink" href="#function" title="Permalink to this headline">¶</a></h3>
<p>A program-level function. A function consists of:</p>
<blockquote>
<div><ul class="simple">
<li><p>List of named inputs and output types.</p></li>
<li><p>A block defining scope for a function – similar to a function in C/C++.</p></li>
</ul>
</div></blockquote>
<p>Function inputs are unordered <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">ValueType)</span></code> pairs.
Inputs intended to process images must be rank-4 Float32 tensors. Dimensions
are interpreted as <code class="docutils literal notranslate"><span class="pre">NCHW</span></code>, with <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">==</span> <span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">C</span></code> being <code class="docutils literal notranslate"><span class="pre">1</span></code> for grayscale
and <code class="docutils literal notranslate"><span class="pre">3</span></code> for RGB. Names must be valid identifiers as described above.</p>
<p>The active block is drawn from this named specialization.
This key must exist in <code class="docutils literal notranslate"><span class="pre">block_specializations</span></code>.</p>
<p>Specialization keys are the name of the opset that the
function specialization is written in. They must be valid
identifiers as described above.</p>
<p>Outputs from all blocks must match. They define the outputs
of the function.
Each block inherits the lexical scope from the function.</p>
<p>Any other attributes not described by other fields.
Keys must be valid identifiers as described above.</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// A program-level function.</span>
<span class="kd">message</span> <span class="nc">Function</span> <span class="p">{</span>

        <span class="c1">// Function inputs are unordered (name, ValueType) pairs.</span>
        <span class="c1">// Inputs intended to process images must be rank-4 Float32 tensors. Dimensions</span>
        <span class="c1">// are interpreted as NCHW, with N == 1 and C being 1 for grayscale and 3 for RGB.</span>
        <span class="c1">// Names must be valid identifiers as described above.</span>
        <span class="k">repeated</span> <span class="n">NamedValueType</span> <span class="na">inputs</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// The active block is drawn from this named specialization.</span>
        <span class="c1">// This key must exist in `block_specializations`.</span>
        <span class="kt">string</span> <span class="na">opset</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

        <span class="c1">// Named specializations of this function.</span>
        <span class="c1">//</span>
        <span class="c1">// Specialization keys are the name of the opset that the</span>
        <span class="c1">// function specialization is written in. They must be valid</span>
        <span class="c1">// identifiers as described above.</span>
        <span class="c1">//</span>
        <span class="c1">// Outputs from all blocks must match. They define the outputs</span>
        <span class="c1">// of the function.</span>
        <span class="c1">// Each block inherits the lexical scope from the function.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Block</span><span class="p">&gt;</span> <span class="na">block_specializations</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="c1">// Any other attributes not described by other fields.</span>
        <span class="c1">// Keys must be valid identifiers as described above.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Value</span><span class="p">&gt;</span> <span class="na">attributes</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="block">
<h3>Block<a class="headerlink" href="#block" title="Permalink to this headline">¶</a></h3>
<p>A Block consists of:</p>
<ul class="simple">
<li><p>List of named inputs and output names</p></li>
<li><p>Topologically sorted Ops</p></li>
</ul>
<p>Infrequently used, these are for operators that may need to give
block-local names to input values (e.g. while_loop).</p>
<p>The names to give to values returned by this block. They must be
identifiers as described above.</p>
<p>ValueType of <code class="docutils literal notranslate"><span class="pre">outputs[i]</span></code> is <code class="docutils literal notranslate"><span class="pre">Operation[j].outputs[k].type</span></code> where
<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code> and <code class="docutils literal notranslate"><span class="pre">k</span></code> are indices of block output, block Operation, and
operation <code class="docutils literal notranslate"><span class="pre">j</span></code> output respectively. This is due to:</p>
<ol class="arabic simple">
<li><p>An operation can have more than one output.</p></li>
<li><p>Any one of operation’s output could be potentially block’s output.</p></li>
</ol>
<p>Any other attributes not described by other fields.
Keys must be valid identifiers as described above.</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// A basic block with a single entry and exit in SSA form.</span>
<span class="kd">message</span> <span class="nc">Block</span> <span class="p">{</span>
        <span class="c1">// Infrequently used, these are for operators that may need to give</span>
        <span class="c1">// block-local names to input values (e.g. while_loop).</span>
        <span class="k">repeated</span> <span class="n">NamedValueType</span> <span class="na">inputs</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// The names to give to values returned by this block. They must be</span>
        <span class="c1">// identifiers as described above.</span>
        <span class="c1">//</span>
        <span class="c1">// ValueType of outputs[i] is Operation[j].outputs[k].type where</span>
        <span class="c1">// i, j and k are indices of block output, block Operation and</span>
        <span class="c1">// jth operation&#39;s output respectively.</span>
        <span class="c1">// this is due to</span>
        <span class="c1">// 1. An operation can have more than one output</span>
        <span class="c1">// 2. Any one of operation&#39;s output could be potentially block&#39;s output</span>
        <span class="k">repeated</span> <span class="kt">string</span> <span class="na">outputs</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

        <span class="k">repeated</span> <span class="n">Operation</span> <span class="na">operations</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="c1">// Any other attributes not described by other fields.</span>
        <span class="c1">// Keys must be valid identifiers as described above.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Value</span><span class="p">&gt;</span> <span class="na">attributes</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="argument">
<h3>Argument<a class="headerlink" href="#argument" title="Permalink to this headline">¶</a></h3>
<p>Argument is list of Binding to either name or value.</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// Argument is list of Binding to either name or value</span>
<span class="kd">message</span> <span class="nc">Argument</span> <span class="p">{</span>
        <span class="kd">message</span> <span class="nc">Binding</span> <span class="p">{</span>
                <span class="k">oneof</span> <span class="n">binding</span> <span class="p">{</span>
                        <span class="c1">// The name of a previously defined value.</span>
                        <span class="kt">string</span> <span class="na">name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

                        <span class="c1">// A compile time constant.</span>
                        <span class="n">Value</span> <span class="na">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
                <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">repeated</span> <span class="n">Binding</span> <span class="na">arguments</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="op">
<h3>Op<a class="headerlink" href="#op" title="Permalink to this headline">¶</a></h3>
<p>A single operation/node/layer.</p>
<p>An Op consists of:</p>
<ul class="simple">
<li><p>List of named inputs and outputs (name, type) pair</p></li>
<li><p>Optionally, blocks for Control-Flow</p></li>
</ul>
<p>Operator arguments:</p>
<ul class="simple">
<li><p>Key: parameter name</p></li>
<li><p>Value: Argument (list of bindings). Value is list of argument binding to
given parameter. Binding can be a string name (previous operation output
or input given to model/block/function), or a Value (known compile time
value for given operation).</p></li>
<li><p>Argument can be of length 1 (general) or variable length (for example, a
concat layer).</p></li>
</ul>
<p>For example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{'stride'</span> <span class="pre">:</span> <span class="pre">['input_01']}</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">{'x'</span> <span class="pre">:</span> <span class="pre">['input_01',</span> <span class="pre">'input_02',</span> <span class="pre">'input_03',</span> <span class="pre">false]}</span></code></div>
</div>
</div></blockquote>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// A single operation/node/layer.</span>
<span class="kd">message</span> <span class="nc">Operation</span> <span class="p">{</span>
        <span class="c1">// Examples: &quot;convolution&quot;, &quot;cropResize&quot;. Operation type defines the</span>
        <span class="c1">// expected inputs and output.</span>
        <span class="kt">string</span> <span class="na">type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// Operator arguments</span>
        <span class="c1">//</span>
        <span class="c1">// Key: parameter name</span>
        <span class="c1">// Value: Argument (list of bindings)</span>
        <span class="c1">//</span>
        <span class="c1">// Value is list of argument binding to given parameter</span>
        <span class="c1">// Binding can be a string name (previous operation output or input given to model/block/function)</span>
        <span class="c1">//             or a Value (known compile time value for given operation)</span>
        <span class="c1">// Argument can be of length 1 (general) or variable length (e.g. concat layer)</span>
        <span class="c1">// e.g. {&#39;stride&#39; : [&#39;input_01&#39;]}</span>
        <span class="c1">// e.g. {&#39;x&#39; : [&#39;input_01&#39;, &#39;input_02&#39;, &#39;input_03&#39;, false]}</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Argument</span><span class="p">&gt;</span> <span class="na">inputs</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

        <span class="c1">// Names to which to bind values returned by this operation.</span>
        <span class="c1">// Names must be:</span>
        <span class="c1">//  (*) valid identifiers as described above; and</span>
        <span class="c1">//  (*) unique within the current scope.</span>
        <span class="k">repeated</span> <span class="n">NamedValueType</span> <span class="na">outputs</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="c1">// Nested blocks for loops and conditionals. For example,</span>
        <span class="c1">// a conditional block will have two entries here.</span>
        <span class="k">repeated</span> <span class="n">Block</span> <span class="na">blocks</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

        <span class="c1">// Any other information not captured by other fields.</span>
        <span class="c1">// Keys must be valid identifiers as described above.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Value</span><span class="p">&gt;</span> <span class="na">attributes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="namedvaluetype">
<h3>NamedValueType<a class="headerlink" href="#namedvaluetype" title="Permalink to this headline">¶</a></h3>
<p>The name of this parameter; must be a valid identifier as described above.</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// Named Value parameters</span>
<span class="c1">// (name, type) pair</span>
<span class="kd">message</span> <span class="nc">NamedValueType</span> <span class="p">{</span>
        <span class="c1">// The name of this parameter; must be a valid identifier as described above.</span>
        <span class="kt">string</span> <span class="na">name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// This parameter&#39;s required type.</span>
        <span class="n">ValueType</span> <span class="na">type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="types">
<h2>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<p>Primer: Two fundamental representations of state:</p>
<p>Variable: Variables are <em>never</em> materialized at compile time and are only
available at run time. Therefore, for Variables we only have ValueType,
which may have unknown shapes in the IR. Variable encompases familiar
concepts such as placeholder, output of an Op.</p>
<p>Value: Values are ALWAYS materialized at compile time, and MAY be modified
at runtime (e.g., during on-device training). Value describes notions
such as parameter, attributes of an op. Value is either stored inside
proto (e.g., attributes) or outside of proto (e.g. parameters) and
NEVER contains unknown shape in the IR.</p>
<p>Comment(daviddai): A Variable with the potential to be materialized at
compile time (e.g., through constant propagation) does <em>not</em> preclude it to
be a Variable. Certain Ops such as LoadParameter and Const, their output
has potential to be materialized at compile time but is still represented
as Variable.</p>
<div class="section" id="valuetype">
<h3>ValueType<a class="headerlink" href="#valuetype" title="Permalink to this headline">¶</a></h3>
<p>A type of any kind.</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">ValueType</span> <span class="p">{</span>
        <span class="k">oneof</span> <span class="n">type</span> <span class="p">{</span>
                <span class="n">TensorType</span> <span class="na">tensorType</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">ListType</span> <span class="na">listType</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
                <span class="n">TupleType</span> <span class="na">tupleType</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
                <span class="n">DictionaryType</span> <span class="na">dictionaryType</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="datatype">
<h3>DataType<a class="headerlink" href="#datatype" title="Permalink to this headline">¶</a></h3>
<p>Two schemes of specifying field id: just start with 0
without reserving numbers, but keep track of the next field ID. The
other is assign blocks of ID to int / float / uint etc.</p>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// Supported data types</span>
<span class="kd">enum</span> <span class="n">DataType</span> <span class="p">{</span>
        <span class="c1">// Comment: Two schemes of specifying field id: just start with 0</span>
        <span class="c1">// without reserving numbers, but keep track of the next field ID. The</span>
        <span class="c1">// other is assign blocks of ID to int / float / uint etc.</span>

        <span class="c1">// 0-10 reserved for special types</span>
        <span class="na">UNUSED_TYPE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// not currently in use</span>
        <span class="na">BOOL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="na">STRING</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>  <span class="c1">// arbitrary sequence of bytes</span>

        <span class="c1">// Floats</span>
        <span class="na">FLOAT16</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="na">FLOAT32</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
        <span class="na">FLOAT64</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>

        <span class="c1">// Ints</span>
        <span class="na">INT8</span> <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>
        <span class="na">INT16</span> <span class="o">=</span> <span class="mi">22</span><span class="p">;</span>
        <span class="na">INT32</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>
        <span class="na">INT64</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span>

        <span class="c1">// UInts</span>
        <span class="na">UINT8</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
        <span class="na">UINT16</span> <span class="o">=</span> <span class="mi">32</span><span class="p">;</span>
        <span class="na">UINT32</span> <span class="o">=</span> <span class="mi">33</span><span class="p">;</span>
        <span class="na">UINT64</span> <span class="o">=</span> <span class="mi">34</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tensortype">
<h3>TensorType<a class="headerlink" href="#tensortype" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">TensorType</span> <span class="p">{</span>
        <span class="c1">// The data type stored in a tensor of this type</span>
        <span class="n">DataType</span> <span class="na">dataType</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// The number of dimensions in the tensor shape. rank == -1 implies</span>
        <span class="c1">// variable (not fixed) rank</span>
        <span class="kt">int64</span> <span class="na">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

        <span class="c1">// Tensor shape values; must be of length &quot;rank&quot;</span>
        <span class="k">repeated</span> <span class="n">Dimension</span> <span class="na">dimensions</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="c1">// Any other tensor type attributes not described by other fields.</span>
        <span class="c1">// Keys must be valid identifiers in MIL text syntax.</span>
        <span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">Value</span><span class="p">&gt;</span> <span class="na">attributes</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tupletype">
<h3>TupleType<a class="headerlink" href="#tupletype" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">TupleType</span> <span class="p">{</span>
        <span class="c1">// Recursively define TupleType from ValueType.</span>
        <span class="k">repeated</span> <span class="n">ValueType</span> <span class="na">types</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="listtype">
<h3>ListType<a class="headerlink" href="#listtype" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">ListType</span> <span class="p">{</span>
        <span class="c1">// The type of element stored in a list of this type</span>
        <span class="n">ValueType</span> <span class="na">type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="c1">// The number of elements in a list of this type. May be unknown (variable length)</span>
        <span class="n">Dimension</span> <span class="na">length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionarytype">
<h3>DictionaryType<a class="headerlink" href="#dictionarytype" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="c1">// An unordered key-value mapping</span>
<span class="kd">message</span> <span class="nc">DictionaryType</span> <span class="p">{</span>
        <span class="n">ValueType</span> <span class="na">keyType</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">ValueType</span> <span class="na">valueType</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dimension">
<h3>Dimension<a class="headerlink" href="#dimension" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">Dimension</span> <span class="p">{</span>
        <span class="k">oneof</span> <span class="n">dimension</span> <span class="p">{</span>
          <span class="n">ConstantDimension</span> <span class="na">constant</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
          <span class="n">UnknownDimension</span> <span class="na">unknown</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">ConstantDimension</span> <span class="p">{</span>
                <span class="kt">uint64</span> <span class="na">size</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">UnknownDimension</span> <span class="p">{</span>
                <span class="kt">bool</span> <span class="na">variadic</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="values">
<h2>Values<a class="headerlink" href="#values" title="Permalink to this headline">¶</a></h2>
<p>See the primer on variables and values at the beginning of the Types section.</p>
<div class="section" id="value">
<h3>Value<a class="headerlink" href="#value" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">Value</span> <span class="p">{</span>
        <span class="kt">string</span> <span class="na">docString</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// optional human-readable texts.</span>
        <span class="n">ValueType</span> <span class="na">type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

        <span class="c1">// An immediate value stored within the proto</span>
        <span class="kd">message</span> <span class="nc">ImmediateValue</span> <span class="p">{</span>
                <span class="k">oneof</span> <span class="n">value</span> <span class="p">{</span>
                        <span class="n">TensorValue</span> <span class="na">tensor</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="n">TupleValue</span> <span class="na">tuple</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
                        <span class="n">ListValue</span> <span class="na">list</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
                        <span class="n">DictionaryValue</span> <span class="na">dictionary</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
                <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Reference to a &quot;blob v2&quot; storage file</span>
        <span class="kd">message</span> <span class="nc">BlobFileValue</span> <span class="p">{</span>
                <span class="c1">// name of file</span>
                <span class="kt">string</span> <span class="na">fileName</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

                <span class="c1">// byte offset to metadata</span>
                <span class="kt">uint64</span> <span class="na">offset</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">oneof</span> <span class="n">value</span> <span class="p">{</span>
                <span class="n">ImmediateValue</span> <span class="na">immediateValue</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
                <span class="n">BlobFileValue</span> <span class="na">blobFileValue</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tensorvalue">
<h3>TensorValue<a class="headerlink" href="#tensorvalue" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">TensorValue</span> <span class="p">{</span>
        <span class="k">oneof</span> <span class="n">value</span> <span class="p">{</span>
                <span class="n">RepeatedFloats</span> <span class="na">floats</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">RepeatedInts</span> <span class="na">ints</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
                <span class="n">RepeatedBools</span> <span class="na">bools</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
                <span class="n">RepeatedStrings</span> <span class="na">strings</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
                <span class="n">RepeatedLongInts</span> <span class="na">longInts</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
                <span class="n">RepeatedDoubles</span> <span class="na">doubles</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
                <span class="n">RepeatedBytes</span> <span class="kt">bytes</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedFloats</span> <span class="p">{</span>
                <span class="k">repeated</span> <span class="kt">float</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">[</span><span class="k">packed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedDoubles</span> <span class="p">{</span>
                <span class="k">repeated</span> <span class="kt">double</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">[</span><span class="k">packed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedInts</span> <span class="p">{</span>
                <span class="k">repeated</span> <span class="kt">int32</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">[</span><span class="k">packed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedLongInts</span> <span class="p">{</span>
                <span class="k">repeated</span> <span class="kt">int64</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">[</span><span class="k">packed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedBools</span> <span class="p">{</span>
                <span class="k">repeated</span> <span class="kt">bool</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">[</span><span class="k">packed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedStrings</span> <span class="p">{</span>
                <span class="k">repeated</span> <span class="kt">string</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kd">message</span> <span class="nc">RepeatedBytes</span> <span class="p">{</span>
                <span class="kt">bytes</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="tuplevalue">
<h3>TupleValue<a class="headerlink" href="#tuplevalue" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">TupleValue</span> <span class="p">{</span>
        <span class="c1">// Comment: TupleValue is recursively defined from Value.</span>
        <span class="k">repeated</span> <span class="n">Value</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="listvalue">
<h3>ListValue<a class="headerlink" href="#listvalue" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">ListValue</span> <span class="p">{</span>
        <span class="k">repeated</span> <span class="n">Value</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionaryvalue">
<h3>DictionaryValue<a class="headerlink" href="#dictionaryvalue" title="Permalink to this headline">¶</a></h3>
<div class="highlight-proto notranslate"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">DictionaryValue</span> <span class="p">{</span>
        <span class="kd">message</span> <span class="nc">KeyValuePair</span> <span class="p">{</span>
                <span class="n">Value</span> <span class="na">key</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">Value</span> <span class="na">value</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">repeated</span> <span class="n">KeyValuePair</span> <span class="na">values</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="NeuralNetwork.html" class="btn btn-neutral float-right" title="NeuralNetwork" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Identity.html" class="btn btn-neutral float-left" title="Identity" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Apple Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>