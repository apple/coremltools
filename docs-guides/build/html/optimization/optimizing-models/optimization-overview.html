<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview &mdash; Core ML Tools Guide  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/imgstyle.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Optimization Workflow" href="optimization-workflow.html" />
    <link rel="prev" title="Optimizing Models" href="optimizing-models.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Core ML Tools Guide
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/overview-coremltools.html">What Is Core ML Tools?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/new-features.html">New Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/faqs.html">Core ML Tools FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/coremltools-examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/migration.html">Migration Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/contributing.html">Contributing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Essentials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../essentials/installing-coremltools.html">Installing Core ML Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../essentials/introductory-quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../essentials/unified-conversion-api.html">Core ML Tools API Overview</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apple.github.io/coremltools/mlmodel/index.html">Core ML Model Format</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apple/coremltools">API GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unified Conversion</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../unified/convert-learning-models/convert-learning-models.html">Converting Deep Learning Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified/ml-programs/ml-programs.html">ML Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified/convert-tensorflow/convert-tensorflow.html">Converting from TensorFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified/convert-pytorch/convert-pytorch.html">Converting from PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified/conversion-options/conversion-options.html">Conversion Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unified/model-intermediate-language.html">Model Intermediate Language</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Optimization</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="optimizing-models.html">Optimizing Models</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#types-of-compression">Types of Compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#when-to-compress">When to Compress</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-compress">How to Compress</a></li>
<li class="toctree-l3"><a class="reference internal" href="#learn-more-about-accuracy-and-performance">Learn More about Accuracy and Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-availability-of-optimizations">Software Availability of Optimizations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="optimization-workflow.html">Optimization Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance-impact.html">Accuracy and Performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api-overview/api-overview.html">Optimize API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pruning/pruning.html">Pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../palettization/palettization.html">Palettization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quantization-aware-training/quantization-aware-training.html">Linear 8-Bit Quantization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quantization-neural-network.html">Compressing Neural Network Weights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Converters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../other-converters/libsvm-conversion.html">LibSVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other-converters/sci-kit-learn-conversion.html">Scikit-learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../other-converters/xgboost-conversion.html">XGBoost</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MLModel</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../mlmodel/mlmodel.html">MLModel Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mlmodel/xcode-model-preview-types.html">Xcode Model Preview Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mlmodel/mlmodel-utilities.html">MLModel Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mlmodel/model-prediction.html">Model Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mlmodel/updatable-model-examples/updatable-model-examples.html">Updatable Models</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Core ML Tools Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="optimizing-models.html">Optimizing Models</a> &raquo;</li>
      <li>Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/optimization/optimizing-models/optimization-overview.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h1>
<p>Optimization is a rapidly evolving field of machine learning. There are several ways to optimize a deep learning model. For example, you can distill a large model into a smaller model, start from scratch and train a smaller efficient architecture, customize the model architecture for a specific task and hardware, and so on. This section focuses specifically on techniques that achieve a smaller model by compressing its weights, and optionally its activations. In particular, this section covers those optimizations that enable you to take a model with <code class="docutils literal notranslate"><span class="pre">float</span></code> precision weights and modify the weights into smaller-sized approximate and lossy representations, allowing you to trade off task accuracy with overall model size and on-device performance.</p>
<section id="types-of-compression">
<h2>Types of Compression<a class="headerlink" href="#types-of-compression" title="Permalink to this heading"></a></h2>
<p>There are lots of different ways to compress weights and activations of a neural network model, and for each kind of compression type, there are different algorithms to achieve it. This is an extremely active area of research and development. Most of these methods result in weights that can be represented in one of the three formats that Core ML supports. For overviews of these formats and examples, see the following:</p>
<ul class="simple">
<li><p>Sparse weights:  <span class="xref myst">Pruning</span></p></li>
<li><p>Palettized weights: <span class="xref myst">Palettization</span></p></li>
<li><p>8 bit linear quantization (weights and/or activations): <span class="xref myst">Linear 8-Bit Quantization</span></p></li>
</ul>
</section>
<section id="when-to-compress">
<h2>When to Compress<a class="headerlink" href="#when-to-compress" title="Permalink to this heading"></a></h2>
<p>You can either directly compress a Core ML model, or compress a model in the source framework during training and then convert. While the former is quicker and can happen without needing data, the latter can preserve accuracy better by fine-tuning with data. To find out more about the two workflows see <span class="xref myst">Optimization Workflow</span>.</p>
</section>
<section id="how-to-compress">
<h2>How to Compress<a class="headerlink" href="#how-to-compress" title="Permalink to this heading"></a></h2>
<p>You can compress the model in your source framework and then convert, or use the recommended workflow which is to use <code class="docutils literal notranslate"><span class="pre">coremltools.optimize.coreml.*</span></code> APIs for data free compression or <code class="docutils literal notranslate"><span class="pre">coremltools.optimize.torch.*</span></code> APIs to compress with data and fine tuning. To learn more on how to use these APIs see <a class="reference internal" href="../../essentials/unified-conversion-api.html"><span class="doc std std-doc">API Overview</span></a>.</p>
</section>
<section id="learn-more-about-accuracy-and-performance">
<h2>Learn More about Accuracy and Performance<a class="headerlink" href="#learn-more-about-accuracy-and-performance" title="Permalink to this heading"></a></h2>
<p>The accuracy of the compressed model depends not only on the type of model and the task for which it is trained, but also on the amount of the compression ratio. To learn more about the impact of model compression methods, see  <span class="xref myst">Accuracy and Performance</span>.</p>
</section>
<section id="software-availability-of-optimizations">
<h2>Software Availability of Optimizations<a class="headerlink" href="#software-availability-of-optimizations" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">block</span><span class="p">:</span><span class="n">parameters</span><span class="p">]</span>
<span class="p">{</span>
  <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;h-0&quot;</span><span class="p">:</span> <span class="s2">&quot;OS versions&quot;</span><span class="p">,</span>
    <span class="s2">&quot;h-1&quot;</span><span class="p">:</span> <span class="s2">&quot;Optimizations&quot;</span><span class="p">,</span>
    <span class="s2">&quot;h-2&quot;</span><span class="p">:</span> <span class="s2">&quot;Core ML Model Type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;h-3&quot;</span><span class="p">:</span> <span class="s2">&quot;coremltools API&quot;</span><span class="p">,</span>
    <span class="s2">&quot;0-0&quot;</span><span class="p">:</span> <span class="s2">&quot;iOS15 or lower,  </span><span class="se">\n</span><span class="s2">macOS12 or lower&quot;</span><span class="p">,</span>
    <span class="s2">&quot;0-1&quot;</span><span class="p">:</span> <span class="s2">&quot;palettization,  </span><span class="se">\n</span><span class="s2">8 bit quantization&quot;</span><span class="p">,</span>
    <span class="s2">&quot;0-2&quot;</span><span class="p">:</span> <span class="s2">&quot;`neuralnetwork`&quot;</span><span class="p">,</span>
    <span class="s2">&quot;0-3&quot;</span><span class="p">:</span> <span class="s2">&quot;`ct.models.neural_networks.quantization_utils.*`&quot;</span><span class="p">,</span>
    <span class="s2">&quot;1-0&quot;</span><span class="p">:</span> <span class="s2">&quot;iOS16,  </span><span class="se">\n</span><span class="s2">macOS13&quot;</span><span class="p">,</span>
    <span class="s2">&quot;1-1&quot;</span><span class="p">:</span> <span class="s2">&quot;palettization,  </span><span class="se">\n</span><span class="s2">sparsity,  </span><span class="se">\n</span><span class="s2">8 bit quantization&quot;</span><span class="p">,</span>
    <span class="s2">&quot;1-2&quot;</span><span class="p">:</span> <span class="s2">&quot;`mlprogram`&quot;</span><span class="p">,</span>
    <span class="s2">&quot;1-3&quot;</span><span class="p">:</span> <span class="s2">&quot;`ct.optimize.*`&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2-0&quot;</span><span class="p">:</span> <span class="s2">&quot;iOS17,  </span><span class="se">\n</span><span class="s2">macOS14&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2-1&quot;</span><span class="p">:</span> <span class="s2">&quot;iOS16/macOS13 optimizations  </span><span class="se">\n</span><span class="s2">+ 8bit activation quantization,  </span><span class="se">\n</span><span class="s2">runtime memory &amp; latency improvements  &quot;</span><span class="p">,</span>
    <span class="s2">&quot;2-2&quot;</span><span class="p">:</span> <span class="s2">&quot;`mlprogram`&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2-3&quot;</span><span class="p">:</span> <span class="s2">&quot;`ct.optimize.*`&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;cols&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="s2">&quot;rows&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">&quot;align&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;left&quot;</span><span class="p">,</span>
    <span class="s2">&quot;left&quot;</span><span class="p">,</span>
    <span class="s2">&quot;left&quot;</span><span class="p">,</span>
    <span class="s2">&quot;left&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">[</span><span class="o">/</span><span class="n">block</span><span class="p">]</span>
</pre></div>
</div>
<p>You may also find it  useful to view the presentation in <a class="reference external" href="https://developer.apple.com/videos/play/wwdc2023/10047/">WWDC 2023</a> that provides an overview of the optimizations.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="optimizing-models.html" class="btn btn-neutral float-left" title="Optimizing Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="optimization-workflow.html" class="btn btn-neutral float-right" title="Optimization Workflow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Apple Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>